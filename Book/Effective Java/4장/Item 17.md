## 변경 가능성을 최소화하라

### 불변 객체

불변 객체(Immutable)는 한 번 생성되면 그 상태를 변경할 수 없는 객체를 의미한다.
불변 객체는 여러 가지 장점을 가지며, 사용하는 이유는 다음과 같다.

1. 스레드 안전성: 불변 객체는 여러 스레드에서 안전하게 공유할 수 있다. 객체의 상태가 변경되지 않기 때문에 동기화나 락(lock)을 사용할 필요가 없다.
2. 예측 가능성: 불변 객체는 상태가 고정되어 있으므로 예측 가능하며, 버그를 찾기 쉽다.
3. 보안성: 불변 객체는 변경이 불가능하므로 보안 상의 이슈를 방지할 수 있다.
4. 캐싱: 불변 객체는 한 번 생성하면 재사용할 수 있기 때문에 캐싱에 활용할 수 있다.
5. 해시맵 키로 사용 가능: 불변 객체는 해시맵의 키로 사용하기 적합하며, 안정적인 해시코드를 제공한다.

### 불변 객체를 설계하기 위한 원칙

- 객체의 상태를 변경할 수 있는 메서드(Setter)를 제공하지 않는다.
- 모든 필드를 final로 선언하여 변경 불가능하게 만든다.
- 필드를 private으로 선언하여 외부에서 직접 접근할 수 없도록 한다.
- 변경 가능한 컬렉션 대신 불변 컬렉션을 사용한다.
- 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.
	- 클래스에 가변 객체를 참조하는 필드가 하나라도 클라이언트에서 그 객체의 참조를 얻을 수 없도록 해야 한다.
	- 이런 필드는 절대 클라이언트가 제공한 객체 참조를 가리키게 해서는 안 되며, 접근자 메서드가 그 필드를 그대로 반환 해서도 안 된다.
	- 생성자, 접근자, readObject 메서드 [[Item 88]] 모두에서 방어적 복사를 수행하자.

예를 들어, 자바의 'String' 클래스는 불변 객체의 좋은 예 이다. 한 번 생성된 문자열은 변경 할 수 없으며, 새로운 문자열을 생성할 때에도 원본 문자열을 변경하지 않고 새로운 문자열을 생성한다.

불변 객체를 사용하면 코드의 안정성과 가독성을 높일 수 있으며, 버그를 줄이고 다중 스레드 환경에서 안전한 프로그램을 작성할 수 있다.